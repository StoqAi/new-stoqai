<!DOCTYPE html>
<html>
<head>
    <title>{% if categoria %}Editar{% else %}Cadastrar{% endif %} Categoria</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<script>
    // Se estiver em uma rota diferente de "/", mas quer mostrar "/" na barra de endereços:
    if (window.location.pathname !== "/") {
        history.replaceState({}, '', '/');
    }
</script>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <span class="logo-icon">◆</span>
            <span class="logo-text">StoqAi</span>
        </div>
        <div class="navbar-center">
        <a href="{{ url_for('index') }}" class="active">Produtos</a>    
        <a href="{{ url_for('categorias') }}">Categorias</a>
        <a href="{{ url_for('fornecedores') }}">Fornecedores</a>
        <a href="{{ url_for('vendas') }}">Vendas</a>
        <a href="{{ url_for('promocoes') }}">Promoções</a>
        </div>
    </nav>
    <div class="container">
        <h1>{% if categoria %}Editar{% else %}Cadastrar{% endif %} Categoria</h1>
        <p style="color:#555; margin-bottom:18px;">Atualize os campos abaixo para modificar uma categoria.</p>
        <a href="{{ url_for('categorias') }}" class="btn" style="margin-bottom: 18px; width: 120px; height: 25px;">Voltar</a>
        {% if erro %}
            <div class="alerta">{{ erro }}</div>
        {% endif %}
        <form method="POST">
            <div class="form-group">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" value="{{ categoria.Nome if categoria else '' }}" required>
            </div>
            <div style="display: flex; gap: 16px; margin-bottom: 18px; width: 200px; height: 45px;">
                <button type="submit" class="btn">
                    {% if categoria %}Salvar Alterações{% else %}Cadastrar{% endif %}
                </button>
                {% if categoria %}
                <button
                    type="submit"
                    formaction="{{ url_for('excluir_categoria', id=categoria.IdCategoria) }}"
                    formmethod="POST"
                    class="btn"
                    style="background:#4b4b4b;"
                    onclick="return confirm('Excluir categoria?');"
                >Excluir</button>
                {% endif %}
            </div>
        </form>
    </div>
</body>
</html>